

# 帧同步

##  客户端计算的一致性

1. 使用定点数取代浮点数
2. 三角函数查表
3. 自己实现 PRNG


## 网络

server负责统一tick，并转发client的指令，通知其他client 


- 网络协议的选择
    - 基于可靠传输的UDP
        - UDP上加一层封装，自己去实现丢包处理，消息序列，重传等类似TCP的消息处理方式，保证上层逻辑在处理数据包的时候，不需要考虑包的顺序，丢包等。
        - 类似实现 Enet, KCP
        - 不是非常合适在帧同步中使用
    - 冗余信息的UDP
        - 需要上层逻辑自己处理丢包，乱序，重传等问题
        - 两端的消息里面，带有确认帧信息
            - 比如客户端（C）通知服务器（S）第100帧的数据，S收到后通知C，已收到C的第100帧，如果C一直没收到S的通知（丢包，乱序等原因），就会继续发送第100帧的数据给S，直到收到S的确认信息。
        - kcp+fec的模式 实现上更好？？？


[游戏逻辑回滚](https://zhuanlan.zhihu.com/p/38468615)  适合少数角色联机的，对操作反馈要求非常高的, 比如格斗游戏








